<mat-toolbar class="app-toolbar">
  <button mat-icon-button class="me-2" aria-label="Menu" (click)="drawer.toggle()">
    <mat-icon>menu</mat-icon>
  </button>

  <!-- Brand -->
  <a class="app-brand" routerLink="/" aria-label="Bandmate home">
    <img
      class="app-mark"
      src="/assets/brand/Bandmate logo gold transparent.png"
      alt="Bandmate"
      loading="eager"
      decoding="async"
    />
    <span class="app-name">{{ appName }}</span>
    <span class="app-version">{{ version }}</span>
  </a>

  <span class="app-nav-separator"></span>

  <!-- Top nav -->
  <nav class="app-top-nav" aria-label="Primary">
    <a mat-button routerLink="/songs" routerLinkActive="active-top">
      <mat-icon class="me-1">music_note</mat-icon>
      Songs
    </a>

    <a
      mat-button
      routerLink="/setlists"
      routerLinkActive="active-top"
      class="d-none d-md-inline-flex"
    >
      <mat-icon class="me-1">queue_music</mat-icon>
      Setlists
    </a>

    <a
      mat-button
      routerLink="/practice"
      routerLinkActive="active-top"
      class="d-none d-md-inline-flex"
    >
      <mat-icon class="me-1">fitness_center</mat-icon>
      Practice
    </a>
  </nav>

  <span class="flex-grow-1"></span>

  <!-- Upgrade CTA (placeholder) -->
  <button
    mat-stroked-button
    class="app-upgrade d-none d-md-inline-flex"
    type="button"
    (click)="onUpgrade()"
    matTooltip="Upgrade (placeholder)"
  >
    <mat-icon class="me-1">workspace_premium</mat-icon>
    Upgrade
  </button>

  <!-- User menu (placeholder) -->
  <button
    mat-icon-button
    class="app-user-btn"
    [matMenuTriggerFor]="userMenu"
    aria-label="User menu"
  >
    <span class="app-avatar" aria-hidden="true">AR</span>
  </button>

  <mat-menu #userMenu="matMenu" xPosition="before" yPosition="below" class="app-user-menu">
    <div class="app-user-menu-head">
      <div class="app-user-name">Agustín Roel</div>
      <div class="app-user-sub">Local profile (MVP)</div>
    </div>

    <mat-divider></mat-divider>

    <button mat-menu-item type="button" (click)="onLogin()">
      <mat-icon>login</mat-icon>
      <span>Login</span>
    </button>

    <button mat-menu-item type="button" (click)="onLogout()">
      <mat-icon>logout</mat-icon>
      <span>Logout</span>
    </button>

    <mat-divider></mat-divider>

    <button mat-menu-item type="button" routerLink="/settings">
      <mat-icon>settings</mat-icon>
      <span>Settings</span>
    </button>
  </mat-menu>
</mat-toolbar>

<mat-sidenav-container class="app-container">
  <mat-sidenav
    #drawer
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="!(isHandset$ | async)"
    class="bm-sidenav"
  >
    <div class="bm-sidenav-header">
      <div class="bm-sidenav-brand">
        <div class="bm-sidenav-logo" aria-hidden="true">
          <img src="assets/brand/Bandmate logo tale transparent.png" alt="" />
        </div>

        <div class="min-w-0">
          <div class="fw-semibold bm-side-title">Bandmate</div>
          <div class="small opacity-75 bm-side-sub">Prep • Rehearse • Play</div>
        </div>
      </div>
    </div>

    <div class="bm-sidenav-section">
      <div class="bm-sidenav-section-title">Library</div>

      <mat-nav-list class="bm-nav">
        <a mat-list-item routerLink="/songs" routerLinkActive="active">
          <mat-icon matListItemIcon class="me-2">music_note</mat-icon>
          <span>Songs</span>
        </a>

        <a mat-list-item routerLink="/setlists" routerLinkActive="active">
          <mat-icon matListItemIcon class="me-2">queue_music</mat-icon>
          <span>Setlists</span>
        </a>
      </mat-nav-list>
    </div>

    <div class="bm-sidenav-section">
      <div class="bm-sidenav-section-title">Tools</div>

      <mat-nav-list class="bm-nav">
        <a mat-list-item routerLink="/practice" routerLinkActive="active">
          <mat-icon matListItemIcon class="me-2">fitness_center</mat-icon>
          <span>Practice</span>
        </a>
      </mat-nav-list>
    </div>

    <div class="bm-sidenav-footer">
      <div class="small opacity-75">Less chaos. More music.</div>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <main class="app-main">
      <div class="content-wrap">
        <router-outlet />
      </div>
    </main>

    <footer class="app-footer">
      <div class="content-wrap d-flex align-items-center justify-content-between gap-2">
        <span class="small opacity-75">Bandmate — personal project</span>
        <span class="small opacity-75">Angular 21 • Signals • Signal Forms</span>
      </div>
    </footer>
  </mat-sidenav-content>
</mat-sidenav-container>
